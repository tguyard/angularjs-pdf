!function(){"use strict";angular.module("pdf",[]).directive("pdfJs",function(){return{restrict:"A",link:function(scope,element,attrs){var url=scope.$eval(attrs.pdfUrl),pdfDoc=null,pageIndex=1,scale=1,canvas=element[0],ctx=canvas.getContext("2d");scope[attrs.pdfJs]={};var obj=scope[attrs.pdfJs];PDFJS.disableWorker=!0,obj.pageIndex=pageIndex,obj.renderPage=function(num){pdfDoc.getPage(num).then(function(page){var viewport=page.getViewport(scale);canvas.height=viewport.height,canvas.width=viewport.width;var renderContext={canvasContext:ctx,viewport:viewport};page.render(renderContext)}),obj.pageCount=pdfDoc.numPages},obj.previous=function(){obj.pageIndex<=1||(obj.pageIndex=parseInt(obj.pageIndex,10)-1,obj.refresh())},obj.next=function(){obj.pageIndex>=pdfDoc.numPages||(obj.pageIndex=parseInt(obj.pageIndex,10)+1,obj.refresh())},obj.zoomIn=function(){return scale+=.2,obj.renderPage(obj.pageIndex),scale},obj.zoomOut=function(){return scale-=.2,obj.renderPage(obj.pageIndex),scale},obj.refresh=function(){obj.pageIndex>pdfDoc.numPages&&(obj.pageIndex=pdfDoc.numPages),obj.pageIndex<1&&(obj.pageIndex=1),obj.renderPage(obj.pageIndex)},PDFJS.getDocument(url).then(function(_pdfDoc){obj.pageCount=_pdfDoc.numPages,pdfDoc=_pdfDoc,obj.renderPage(obj.pageIndex)})}}})}();